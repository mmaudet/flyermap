---
phase: 07-reconfiguration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - src/style.css
autonomous: true

must_haves:
  truths:
    - "Reconfigure confirmation dialog exists in DOM"
    - "Reconfigure button is visible in panel footer"
    - "Dialog has warning about data loss"
    - "Dialog has Cancel and Confirm buttons"
  artifacts:
    - path: "index.html"
      provides: "Reconfigure dialog HTML and button in panel footer"
      contains: "dialog#reconfigure-confirm"
    - path: "src/style.css"
      provides: "Styling for reconfigure dialog and button"
      contains: "reconfigure-confirm"
  key_links:
    - from: "index.html"
      to: "src/style.css"
      via: "CSS class names"
      pattern: "reconfigure-btn|reconfigure-confirm"
---

<objective>
Add reconfiguration dialog HTML and button to panel footer

Purpose: Provide UI elements for users to reset configuration and change commune
Output: Dialog with data loss warning, reconfigure button in panel footer, CSS styling
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-reconfiguration/07-RESEARCH.md
@index.html
@src/style.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add reconfigure dialog and button to HTML</name>
  <files>index.html</files>
  <action>
Add a reconfigure confirmation dialog after the welcome-wizard dialog. Use native HTML `<dialog>` element with `form method="dialog"` pattern (same as zone-editor).

Dialog structure:
- ID: `reconfigure-confirm`
- Form with method="dialog"
- h3: "Changer de commune ?"
- Warning content div with:
  - Paragraph: "Cette action supprimera definitivement :"
  - Unordered list with:
    - "Tous les colistiers (<span id="member-count">0</span> actuellement)"
    - "Toutes les zones (<span id="zone-count">0</span> actuellement)"
    - "Toutes les assignations"
  - Paragraph with class "warning": bold text "Cette action est irreversible."
- Button row div with:
  - Cancel button: type="submit" value="cancel" class="btn-secondary" autofocus - text "Annuler"
  - Confirm button: type="submit" value="confirm" class="btn-danger" - text "Reinitialiser et changer"

Also add reconfigure button to panel-footer div (after the import-label):
- Button with id="reconfigure-btn" class="action-btn btn-reconfigure"
- Text: "Changer de commune"
  </action>
  <verify>
Open index.html and verify:
1. dialog#reconfigure-confirm exists with form method="dialog"
2. Dialog has member-count and zone-count spans
3. Dialog has Cancel (autofocus) and Confirm (btn-danger) buttons
4. Panel footer has reconfigure-btn button
  </verify>
  <done>
HTML contains reconfigure dialog with warning content, Cancel/Confirm buttons, and reconfigure button in panel footer
  </done>
</task>

<task type="auto">
  <name>Task 2: Add CSS for reconfigure dialog and button</name>
  <files>src/style.css</files>
  <action>
Add CSS styling for the reconfigure dialog and button. Follow existing zone-editor dialog styling patterns.

Add styles for:

1. `dialog#reconfigure-confirm` - same base styling as zone-editor:
   - border: none
   - border-radius: 8px
   - box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3)
   - padding: 0
   - max-width: 450px
   - width: 90%

2. `dialog#reconfigure-confirm::backdrop` - same as zone-editor:
   - background: rgba(0, 0, 0, 0.5)

3. `dialog#reconfigure-confirm form` - same padding as zone-editor:
   - padding: 24px

4. `dialog#reconfigure-confirm h3` - same as zone-editor h3

5. `.warning-content` - content container:
   - margin-bottom: 20px

6. `.warning-content ul` - list styling:
   - margin: 12px 0
   - padding-left: 24px

7. `.warning-content li` - list item:
   - margin-bottom: 4px
   - color: #374151

8. `.warning-content .warning` - warning text:
   - color: #dc2626 (red)
   - margin-top: 16px

9. `.btn-reconfigure` - reconfigure button in footer:
   - background: #f3f4f6 (light gray)
   - color: #374151 (dark gray text)
   - border: 1px solid #d1d5db

10. `.btn-reconfigure:hover`:
    - background: #e5e7eb
  </action>
  <verify>
Run `npm run build` to verify CSS compiles without errors.
Inspect styles in browser devtools to confirm dialog styling matches design.
  </verify>
  <done>
CSS includes styling for reconfigure dialog (backdrop, form, warning content) and reconfigure button in panel footer
  </done>
</task>

</tasks>

<verification>
1. Open app in browser
2. Verify reconfigure button appears in panel footer
3. Manually test dialog by adding `document.getElementById('reconfigure-confirm').showModal()` in console
4. Verify dialog shows warning content with count placeholders
5. Verify Cancel button has autofocus
6. Verify Confirm button has danger styling (red)
7. ESC key closes dialog
</verification>

<success_criteria>
- dialog#reconfigure-confirm exists with proper structure
- Button visible in panel footer with appropriate styling
- Dialog styling matches zone-editor aesthetic
- Warning text clearly communicates data loss consequences
- Cancel button has autofocus (safer default)
</success_criteria>

<output>
After completion, create `.planning/phases/07-reconfiguration/07-01-SUMMARY.md`
</output>
